## Background
The main goal of this project was to track and analyze trailer fuel readings to be more informed of usage and better plan deliveries. The site around which this project was built, runs on Natural Gas and has three trailer trucks of fuel fed into the system at one time. The previous method for tracking these fuel tanks was monitoring a webpage portal that would post the pressure readings for each trailer in real-time. This page did not keep historical records of the tank readings so we had a limited understanding of burn rate and  difficulty tracking usage. The Natural Gas is used for providing heat to the building, so we prioritized gathering this data before entering the winter where we could potentially face a slew of logistical issues given the volume of fuel this site uses. 

## Architecture
First, I used AWS RDS to create and configure a MySQL cloud database. I was then able to utilize AWS Lambda to create a function that will scrape the webpage for Trailer 1, 2, and 3's pressure readings, use an API to pull the current temperature at the zipcode of the site, and export all the data into the MySQL database. Since the main reason for using a cloud function was for automation, I scheduled the Lambda function to run using Amazon EventBridge. Finally, I created a Streamlit app that connects to the database so we can view the extracted data through visualizations and analyze it with statistical models. 

![Cloud Solution Architecture](assets/Cloud_Solution.jpg)

## AWS Lambda Function
Originally, I planned to do this entire project in the Google Cloud Platform (GCP) because I was familiar with Google's 'Cloud Functions' and 'BigQuery' *at the time*. The main reason for not going with GCP was Cloud Functions. For this script, I was using Selenium and ChromeDriver which are rather large packages. It would have been more complicated than I would have liked if I went with Cloud Functions. Thankfully, AWS Lambda offers the ability to use 'Layers' which made it very easy to integrate Selenium and ChromeDriver with my script. I was able to compress and upload both Selenium and ChromeDriver as Layers and package the other binaries I needed in with my script which served as the Lambda function. Within the script, we are able to log in to the website portal, navigate through various pages on the site, extract the pressure readings for the three trailers, and **log out**. I found pretty quickly that logging out of the site before closing and quitting the driver caused some issues with the site. There is a minimum number of active users on an account so this was a crucial step. The script also uses an API from 'OpenWeatherMap' to fetch the current temperature at the zip code of our site and I included a boolean value of 'Offline' to be stored in the data set. Every now and then the monitor on the trailers would be Offline and would not push any readings to the webpage. I thought to include this because we can track the reliability of the technology. Once the function was tested and working, it was scheduled to run every 20 minutes with Amazon EventBridge.

![Lambda](/assets/lambda.png)
